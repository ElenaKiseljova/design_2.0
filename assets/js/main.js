const locoScroll=new LocomotiveScroll({el:document.querySelector("[data-scroll-container]"),smooth:!0});locoScroll.on("scroll",ScrollTrigger.update),ScrollTrigger.scrollerProxy(".wrapper",{scrollTop(e){return arguments.length?locoScroll.scrollTo(e,0,0):locoScroll.scroll.instance.scroll.y},getBoundingClientRect:()=>({top:0,left:0,width:window.innerWidth,height:window.innerHeight}),pinType:document.querySelector(".wrapper").style.transform?"transform":"fixed"}),document.addEventListener("DOMContentLoaded",(()=>{!function(e){if(window.innerWidth>1023){const t=document.querySelector(".images__list"),o=document.querySelectorAll(".works__image img");o&&o.forEach((e=>{const o=`\n\t\t\t\t\t<li class="images__item images__item--visible">\n            <img src="${e.src}" alt="${e.src}">\n          </li>\n\t\t`;t.insertAdjacentHTML("beforeend",o)})),function(){const t=e(".images ");let o=0,r=0,s=0,i=0;document.querySelector(".images ")&&gsap.to({},.0083333333,{repeat:-1,onRepeat:function(){document.querySelector(".images ")&&(o+=(s-o)/12,r+=(i-r)/12,gsap.set(t,{css:{left:o,top:r}}))}}),e(document).on("mousemove",(function(e){s=e.clientX,i=e.clientY})),e(".works__list li").on("mouseenter",(function(){e(".images ").addClass("active")})),e(".works__list li").on("mouseleave",(function(){e(".images ").removeClass("active")})),e(".works__list li.visible").on("mouseenter",(function(){let t=e(".works__list li.visible").index(e(this)),o=e(".images__item--visible").length;e(".images__list")&&gsap.to(e(".images__list"),{y:100*t/(-1*o)+"%",duration:.6,ease:Power2.easeInOut}),e(".images.active .images__wrapper").addClass("active").delay(400).queue((function(t){e(this).removeClass("active"),t()}))}))}()}}(jQuery);const e=document.querySelectorAll(".magnetic");if(window.innerWidth>540){function t(e){let t=e.currentTarget,o=t.getBoundingClientRect(),r=t.getAttribute("data-strength");gsap.to(t,1.5,{x:((e.clientX-o.left)/t.offsetWidth-.5)*r,y:((e.clientY-o.top)/t.offsetHeight-.5)*r,rotate:"0.001deg",ease:Power4.easeOut})}e.forEach((e=>{e.addEventListener("mousemove",t),e.addEventListener("mouseleave",(function(e){gsap.to(e.currentTarget,1.5,{x:0,y:0,ease:Elastic.easeOut})}))}))}window.innerWidth>1023&&document.querySelectorAll(".image").forEach((e=>{const t=Array.from(e.querySelectorAll("img"));new hoverEffect({parent:e,intensity:.2,speedIn:1.6,speedOut:1.6,hover:!0,image1:t[0].getAttribute("src"),image2:t[1].getAttribute("src"),displacementImage:e.dataset.displacement})}));document.querySelector(".hero");const o=document.querySelector(".services"),r=document.querySelector(".services__inner");if(ScrollTrigger.defaults({scroller:document.querySelector(".wrapper")}),o){const N=gsap.timeline({scrollTrigger:{trigger:o,start:"top center"}});N.fromTo(".services__right p",{opacity:0},{duration:1,opacity:1}),N.fromTo(".services__point",{opacity:0},{duration:1,opacity:1},"=-0.5"),N.fromTo(".services__circle",{scale:0,xPercent:-100},{ease:Power3.easeOut,duration:1.5,scale:1,xPercent:0},"=-1.3"),window.innerWidth<1023?N.fromTo(".services__image ",{width:0,opacity:0},{ease:Power3.easeOut,duration:.6,width:"276px",opacity:1,stagger:.1,overflow:"visible"},"=-1.2"):N.fromTo(".services__image canvas",{width:0,opacity:0},{ease:Power3.easeOut,duration:.8,width:"276px",opacity:1,stagger:.1,overflow:"visible"},"=-1.2"),N.fromTo(".services__item span",{opacity:0},{ease:Power3.easeOut,duration:.8,opacity:1,stagger:.1},"=-1.5"),N.fromTo(".services__title",{opacity:0},{ease:Power3.easeOut,duration:.8,opacity:1,stagger:.1},"=-1.2"),N.fromTo(".services__btns",{opacity:0},{ease:Power3.easeOut,duration:.8,opacity:1,stagger:.1},"=-1.2")}r&&gsap.timeline({scrollTrigger:{trigger:r,scrub:!0,pinSpacing:!1,start:"30% 100%",end:"100% 100%"}}).to(".round__wrap",{height:0}).from(r,{ease:"power1.out",y:-300},"-=0.5").to(".mission__overlay",{ease:"power1.out",opacity:0},"-=0.5");const s=document.querySelector("#cursor"),i=document.querySelector("body");if(s&&localStorage.getItem("cords")){let M=JSON.parse(localStorage.getItem("cords"));s.style=`top: ${M.y}px; left: ${M.x}px;`}function a(e,t){document.querySelectorAll(e).forEach((e=>{e.addEventListener("mouseenter",(e=>{s.id=`${t}`;const o=e.clientY-s.offsetHeight/2,r=e.clientX-s.offsetWidth/2;switch(setTimeout((()=>{s.style=`top: ${o}px; left: ${r}px;`}),50),t){case"cursor__hover":case"cursor__hover_white":i.style.setProperty("--scale","3.75");break;case"cursor__video_hover":case"cursor__slider_hover":i.style.setProperty("--scale","10")}})),e.addEventListener("mouseleave",(e=>{s.id=`${t}__cursor`;const o=e.clientY-s.offsetHeight/2,r=e.clientX-s.offsetWidth/2;i.style.setProperty("--scale","0.4"),setTimeout((()=>{s.style=`top: ${o}px; left: ${r}px;`}),50)}))}))}document.addEventListener("mousemove",(e=>{const t=e.clientY-s.offsetHeight/2,o=e.clientX-s.offsetWidth/2;localStorage.setItem("cords",JSON.stringify({x:o,y:t})),setTimeout((()=>{s.style=`top: ${t}px; left: ${o}px;`}),50)})),a(".a","cursor__hover"),a(".a_white","cursor__hover_white"),a(".my_video_container video","cursor__video_hover"),a(".video","cursor__video_hover"),a(".cursor","cursor__slider_hover");let n=1;const c=d(".hero__profession",{duration:18}),l=d(".aaa",{duration:10},!0);ScrollTrigger.create({trigger:document.querySelector(".hero"),onUpdate(e){e.direction!==n&&(n*=-1,gsap.to([c,l],{timeScale:n,overwrite:!0}))}});function d(e,t,o){(t=t||{}).ease||(t.ease="none");const r=gsap.timeline({repeat:-1,onReverseComplete(){this.totalTime(this.rawTime()+10*this.duration())}}),s=gsap.utils.toArray(e),i=s.map((e=>{let t=e.cloneNode(!0);return e.parentNode.appendChild(t),t})),a=()=>s.forEach(((e,t)=>gsap.set(i[t],{position:"absolute",overwrite:!1,top:e.offsetTop,left:e.offsetLeft+(o?-e.offsetWidth:e.offsetWidth)})));return a(),s.forEach(((e,s)=>r.to([e,i[s]],{xPercent:o?100:-100,...t},0))),window.addEventListener("resize",(()=>{let e=r.totalTime();r.totalTime(0),a(),r.totalTime(e)})),r}window.innerWidth>1023&&(gsap.registerEffect({name:"ticker",effect(e,t){!function e(t,o){let r;o&&o.clones?(o.clones.forEach((e=>e&&e.parentNode&&e.parentNode.removeChild(e))),o.forEach(((e,t)=>o.inlineWidths[t]?e.style.width=o.inlineWidths[t]:e.style.removeProperty("width"))),r=o):r=t.targets;const s=r.clones=[],i=r.inlineWidths=[];r.forEach(((e,o)=>{i[o]=e.style.width,e.style.width="10000px",e.children[0].style.display="block";let r,a=e.children[0].offsetWidth,n=Math.ceil(window.innerWidth/a),c="right"===e.dataset.direction;for(e.style.width=a*(n+1)+"px",r=0;r<n;r++)s.push(t.clone(e));let l=gsap.fromTo(e,{x:c?-a:0},{x:c?0:-a,duration:a/100/parseFloat(e.dataset.speed||1),repeat:-1,overwrite:"auto",ease:"none"});l.pause();const d=document.querySelectorAll(".works__link");d&&d.forEach((e=>{e.addEventListener("mouseenter",(e=>{l.play()})),e.addEventListener("mouseleave",(e=>{l.pause()}))}))})),o||window.addEventListener("resize",(()=>e(t,r)))}({targets:e,clone:t.clone||(e=>{let t=e.children[0].cloneNode(!0);return e.insertBefore(t,e.children[0]),t})})}}),gsap.effects.ticker(".marquee"));const u=()=>{document.documentElement.style.setProperty("--app-height",`${window.innerHeight}px`)};function g({swiper:e,extendParams:t,on:o}){t({debugger:!1}),o("init",(()=>{e.params.debugger})),o("click",((e,t)=>{e.params.debugger})),o("tap",((e,t)=>{e.params.debugger})),o("doubleTap",((e,t)=>{e.params.debugger})),o("sliderMove",((e,t)=>{if(!e.params.debugger)return;const o=t.clientY-s.offsetHeight/2,r=t.clientX-s.offsetWidth/2;setTimeout((()=>{s.style=`top: ${o}px; left: ${r}px;`}),50)})),o("slideChange",(()=>{e.params.debugger})),o("slideChangeTransitionStart",(()=>{e.params.debugger})),o("slideChangeTransitionEnd",(()=>{e.params.debugger})),o("transitionStart",(()=>{e.params.debugger})),o("transitionEnd",(()=>{e.params.debugger})),o("fromEdge",(()=>{e.params.debugger})),o("reachBeginning",(()=>{e.params.debugger})),o("reachEnd",(()=>{e.params.debugger}))}window.addEventListener("resize",u),u();const m=document.querySelector(".team__slider"),p=document.querySelector(".services__slider"),h=document.querySelector(".case__slider");if(m){new Swiper(m,{modules:[g],slidesPerView:"auto",spaceBetween:30,speed:400,pagination:{el:".swiper-pagination",type:"progressbar"},debugger:!0})}if(p){new Swiper(p,{modules:[g],slidesPerView:"auto",speed:400,spaceBetween:30,debugger:!0,navigation:{nextEl:".services__btn--next",prevEl:".services__btn--prev"}})}if(h){new Swiper(h,{modules:[g],slidesPerView:"auto",spaceBetween:30,navigation:{nextEl:".case__btn--next",prevEl:".case__btn--prev"},pagination:{el:".case__pagination",type:"progress"},pagination:{el:".case__count",type:"fraction"},debugger:!0})}let f=document.querySelector(".swiper-pagination-current"),_=document.querySelector(".swiper-pagination-total"),v=document.querySelector(".case__pagination"),y=document.querySelector("#progress");if(f){new MutationObserver((e=>{let t=Number(f.innerHTML)*(v.offsetWidth/Number(_.innerHTML));y.style.width=t+"px",y.style.transition="all 0.3s"})).observe(f,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}const w=document.querySelector(".hamburger"),S=document.querySelector(".header__right");let b=0;function L(){w.classList.toggle("active"),S.classList.toggle("active")}w&&S&&(w.addEventListener("click",(()=>{0==b?(L(),scrollLock.disablePageScroll(),b++):(L(),scrollLock.enablePageScroll(),b=0)})),S.addEventListener("click",(e=>{e.target.closest("a")&&(scrollLock.enablePageScroll(),L())})));const q=document.querySelector(".form").querySelectorAll(".form__label");document.querySelector(".form").querySelectorAll(".form__label.error");if(q)for(let I=0;I<q.length;I++){let B=q[I].querySelector(".form__border--top"),j=q[I+1]?q[I+1].querySelector(".form__border--top"):null,X=document.querySelector(".form__border--bottom");q[I].addEventListener("focusin",(()=>{B.classList.add("active"),j&&j.classList.add("active"),I===q.length-1&&X.classList.add("active")})),q[I].addEventListener("focusout",(()=>{B.classList.remove("active"),j&&j.classList.remove("active"),X&&X.classList.remove("active")}))}const E=document.querySelector(".form"),T=document.querySelector(".feedback__btn"),x=document.querySelector(".feedback__right"),P=document.querySelector("#feedback-error-message"),k=document.querySelector("#feedback-success-message");if(E&&T&&x&&P&&k){const Y=E.querySelector("#form__name"),z=E.querySelector("#form__email"),R=x.querySelector(".feedback__message");function O(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function W(e){return!/^[a-zA-Zа-яА-Я -]+$/i.test(e.value)}function A(e,t="",o=!0){o?e.parentNode.classList.add(t):e.parentNode.classList.remove(t)}Y.addEventListener("focusout",(()=>{A(Y,"error1",W(Y))})),Y.addEventListener("focus",(()=>{Y.parentNode.classList.remove("error1")})),z.addEventListener("focusout",(()=>{A(z,"error2",O(z))})),z.addEventListener("focus",(()=>{z.parentNode.classList.remove("error2")}));const D=(e=!0,t="")=>{if(x.classList.add("hide"),R.classList.add("active"),t.length>0)R.innerHTML=t;else{let t;t=e?P.content.cloneNode(!0):k.content.cloneNode(!0),R.innerHTML="",R.appendChild(t)}T.querySelectorAll("span").forEach((e=>e.textContent=e.dataset.sendAgain??"")),E.dataset.full=1},V=e=>{const t=design_ajax.url??"";try{fetch(t,{method:"POST",credentials:"same-origin",body:e}).then((e=>e.json())).then((e=>{!0===e.success?(D(!1),console.log("Успех:",e)):(D(),console.error("Ошибка:",e))})).catch((e=>{D(),console.error("Ошибка:",e)}))}catch(e){D(),console.error("Ошибка:",e)}};T.addEventListener("click",(function(e){if(0==E.dataset.full)if(W(Y)||O(z))A(Y,"error1",W(Y)),A(z,"error2",O(z));else{const e=new FormData(E);e.append("action","design_sendmail"),e.append("security",design_ajax.nonce);let t=0;const o=design_ajax.site_key??!1;o&&grecaptcha?grecaptcha.ready((function(){grecaptcha.execute(o,{action:"submit"}).then((function(o){t=1,e.append("antibot",t),V(e)}))})):(t=1,e.append("antibot",t),V(e))}else E.reset(),x.classList.remove("hide"),R.classList.remove("active"),T.querySelectorAll("span").forEach((e=>e.textContent=e.dataset.sendIt??"")),E.dataset.full=0}))}let $=document.querySelector(".select"),C=document.querySelector(".select__header"),H=document.querySelectorAll(".select__list-item");$&&(C.addEventListener("click",(()=>{$.classList.contains("is-active")?$.classList.remove("is-active"):$.classList.add("is-active")})),H.forEach((e=>{e.addEventListener("click",(()=>{H.forEach((e=>e.classList.remove("is-active"))),e.classList.add("is-active"),document.querySelector(".select__header-current").innerHTML=e.innerHTML,$.classList.remove("is-active")}))})))})),ScrollTrigger.addEventListener("refresh",(()=>locoScroll.update())),ScrollTrigger.refresh();const loader=document.querySelector("#loader"),heroSection=document.querySelector(".hero"),tl=gsap.timeline();loader&&(loader.classList.add("load"),window.innerWidth<1023&&tl.set("body",{overflow:"hidden"}),heroSection&&(tl.set(".hero__btn",{xPercent:-100}),tl.set(".hero__circle",{scale:0}),tl.set(".hero__bottom",{height:0,overflow:"hidden"}),tl.set(".hero__text",{opacity:0}),tl.set(".hero__image img",{opacity:0,y:-200}),tl.set(".header",{opacity:0})),tl.set(".loading-screen",{top:"0"}),tl.set(".loading-words .home-active-last",{display:"block",opacity:0}),tl.set(".loading-words .home-active-first",{opacity:1}),window.innerWidth>540?tl.set(".loading-screen .rounded-div-wrap.bottom",{height:"10vh"}):tl.set(".loading-screen .rounded-div-wrap.bottom",{height:"5vh"}),tl.set("html",{cursor:"none"}),tl.call((function(){locoScroll.stop()})),tl.to(".loading-words",{duration:.8,opacity:1,ease:"Power4.easeOut",delay:.5}),tl.to(".loading-words .home-active-last",{duration:.01,opacity:1,delay:.15})),window.onload=function(){loader&&setTimeout((()=>{tl.to(".loading-screen",{duration:.8,top:"-100%",ease:"Power4.easeInOut",delay:2.2}),tl.to(".loading-screen .rounded-div-wrap.bottom",{duration:1,height:"0vh",ease:"Power4.easeInOut"},"=-.8"),tl.to(".loading-words",{duration:.3,opacity:0,ease:"linear"},"=-.8"),tl.set(".loading-container",{top:"calc(-100%)"}),tl.set(".loading-screen .rounded-div-wrap.bottom",{height:"0vh"}),heroSection&&(tl.to(".hero__circle",{scale:1,duration:1.7,ease:Power3.easeOut},"=-1.3"),tl.to(".hero__image img",{opacity:1,duration:.5,ease:Power3.easeOut},"=-1.5"),tl.to(".hero__image img",{y:0,duration:1,ease:Power3.easeOut},"=-1.2"),tl.to(".hero__bottom",{height:220,duration:.5,ease:Power1.easeOut}),tl.to(".hero__text",{opacity:1,duration:.5,ease:Power1.easeOut},"=-0.4"),tl.to(".hero__btn",{xPercent:0,ease:Power1.easeOut},"=-0.4"),tl.to(".header",{opacity:1,duration:.5,ease:Power1.easeOut},"=-0.2")),tl.set("html",{cursor:"auto"},"=-1.2"),window.innerWidth<1023&&tl.set("body",{overflow:"visible"}),tl.call((function(){locoScroll.start(),window.dispatchEvent(preloaderHided)}))}),1e3)};