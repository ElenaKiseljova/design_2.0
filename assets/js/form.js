const form=document.querySelector(".form"),input_name=form.querySelector("#form__name"),input_email=form.querySelector("#form__email"),btnSubmit=document.querySelector(".feedback__btn"),feedbackRight=document.querySelector(".feedback__right"),feedbackSuccess=feedbackRight.querySelector(".feedback__message--success"),feedbackError=feedbackRight.querySelector(".feedback__message--error");function email_test(e){return!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)}function name_test(e){return!/^[a-zA-Zа-яА-Я -]+$/i.test(e.value)}function validate_input(e,t="",a=!0){a?e.parentNode.classList.add(t):e.parentNode.classList.remove(t)}input_name.addEventListener("focusout",(()=>{validate_input(input_name,"error1",name_test(input_name))})),input_name.addEventListener("focus",(()=>{input_name.parentNode.classList.remove("error1")})),input_email.addEventListener("focusout",(()=>{validate_input(input_email,"error2",email_test(input_email))})),input_email.addEventListener("focus",(()=>{input_email.parentNode.classList.remove("error2")})),btnSubmit.addEventListener("click",(function(e){if(0==form.getAttribute("data-full"))if(name_test(input_name)||email_test(input_email))validate_input(input_name,"error1",name_test(input_name)),validate_input(input_email,"error2",email_test(input_email));else{const e=new FormData(form);e.append("action","design_sendmail");let t="https://jsonpla ceholder.typicode.com/posts";try{fetch(t,{method:"post",headers:{"Content-type":"application/x-www-form-urlencoded; charset=UTF-8"},body:e}).then((e=>e.json())).then((e=>{101===e.id&&(feedbackRight.classList.add("hide"),feedbackSuccess.classList.add("active"),btnSubmit.querySelectorAll("span").forEach((e=>e.textContent="SEND AGAIN")),form.setAttribute("data-full",1)),console.log(e)})).catch((e=>{feedbackRight.classList.add("hide"),feedbackError.classList.add("active"),btnSubmit.querySelectorAll("span").forEach((e=>e.textContent="SEND AGAIN")),form.setAttribute("data-full",1)}))}catch(e){feedbackRight.classList.add("hide"),feedbackError.classList.add("active"),btnSubmit.querySelectorAll("span").forEach((e=>e.textContent="SEND AGAIN")),form.setAttribute("data-full",1)}}else form.reset(),feedbackRight.classList.remove("hide"),feedbackSuccess.classList.remove("active"),feedbackError.classList.remove("active"),btnSubmit.querySelectorAll("span").forEach((e=>e.textContent="SEND IT")),form.setAttribute("data-full",0)}));